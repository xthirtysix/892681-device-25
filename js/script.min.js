var overlay=document.querySelector(".modal-overlay"),writeUs=document.querySelector(".write-us"),openWriteUs=document.querySelector(".button--write-us"),closeWriteUs=document.querySelector(".write-us__close"),map=document.querySelector(".modal-map"),openMap=document.querySelector(".map"),closeMap=document.querySelector(".modal-map__close"),form=writeUs.querySelector("form"),username=writeUs.querySelector("[name=username]"),email=writeUs.querySelector("[name=email]"),mailBody=writeUs.querySelector("[name=mail-body]"),isStorageSupport=!0,storageName="",storageEmail="";openWriteUs.addEventListener("click",function(e){e.preventDefault(),username.focus(),storageName&&(username.value=storageName,email.focus()),storageEmail?(email.value=storageEmail,mailBody.focus()):username.focus(),writeUs.classList.add("modal--show"),overlay.classList.add("modal-overlay--show")}),closeWriteUs.addEventListener("click",function(e){e.preventDefault(),writeUs.classList.remove("modal--show"),writeUs.classList.remove("modal--error"),overlay.classList.remove("modal-overlay--show")}),openMap.addEventListener("click",function(e){e.preventDefault(),map.classList.add("modal--show"),overlay.classList.add("modal-overlay--show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),map.classList.remove("modal--show"),overlay.classList.remove("modal-overlay--show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(writeUs.classList.contains("modal--show")&&(e.preventDefault(),writeUs.classList.remove("modal--show"),writeUs.classList.remove("modal--error"),overlay.classList.remove("modal-overlay--show")),map.classList.contains("modal--show")&&(e.preventDefault(),map.classList.remove("modal--show"),overlay.classList.remove("modal-overlay--show")))}),overlay.addEventListener("click",function(e){writeUs.classList.contains("modal--show")&&(e.preventDefault(),writeUs.classList.remove("modal--show"),writeUs.classList.remove("modal--error"),overlay.classList.remove("modal-overlay--show")),map.classList.contains("modal--show")&&(e.preventDefault(),map.classList.remove("modal--show"),map.classList.remove("modal--error"),overlay.classList.remove("modal-overlay--show"))});try{storageName=localStorage.getItem("username"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}form.addEventListener("submit",function(e){username.value&&email.value&&mailBody.value?isStorageSupport&&(localStorage.setItem("username",username.value),localStorage.setItem("email",email.value)):(e.preventDefault(),writeUs.classList.remove("modal--error"),writeUs.offsetWidth=writeUs.offsetWidth,writeUs.classList.add("modal--error"))});
