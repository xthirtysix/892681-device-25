var overlay=document.querySelector(".modal-overlay"),writeUs=document.querySelector(".write-us"),openWriteUs=document.querySelector(".button--write-us"),closeWriteUs=document.querySelector(".write-us__close"),map=document.querySelector(".modal-map"),openMap=document.querySelector(".map"),closeMap=document.querySelector(".modal-map__close"),form=writeUs.querySelector("form"),username=writeUs.querySelector("[name=username]"),email=writeUs.querySelector("[name=email]"),mailBody=writeUs.querySelector("[name=mail-body]"),isStorageSupport=!0,storageName="",storageEmail="",slides=document.querySelectorAll(".main-slider__slide"),switches=document.querySelectorAll(".main-slider__switcher"),services=document.querySelectorAll(".services__slide"),servicesButtons=document.querySelectorAll(".services__button"),servicesTabs=document.querySelectorAll(".services__tab");try{storageName=localStorage.getItem("username"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}form.addEventListener("submit",function(e){username.value&&email.value&&mailBody.value?isStorageSupport&&(localStorage.setItem("username",username.value),localStorage.setItem("email",email.value)):(e.preventDefault(),writeUs.classList.remove("modal--error"),writeUs.offsetWidth=writeUs.offsetWidth,writeUs.classList.add("modal--error"))}),openWriteUs.addEventListener("click",function(e){e.preventDefault(),writeUs.classList.add("modal--show"),overlay.classList.add("modal-overlay--show"),storageName&&storageEmail?(username.value=storageName,email.value=storageEmail,mailBody.focus()):storageName?(username.value=storageName,email.focus()):username.focus()}),closeWriteUs.addEventListener("click",function(e){e.preventDefault(),writeUs.classList.remove("modal--show"),writeUs.classList.remove("modal--error"),overlay.classList.remove("modal-overlay--show")}),openMap.addEventListener("click",function(e){e.preventDefault(),map.classList.add("modal--show"),overlay.classList.add("modal-overlay--show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),map.classList.remove("modal--show"),overlay.classList.remove("modal-overlay--show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(writeUs.classList.contains("modal--show")&&(e.preventDefault(),writeUs.classList.remove("modal--show"),writeUs.classList.remove("modal--error"),overlay.classList.remove("modal-overlay--show")),map.classList.contains("modal--show")&&(e.preventDefault(),map.classList.remove("modal--show"),overlay.classList.remove("modal-overlay--show")))}),overlay.addEventListener("click",function(e){writeUs.classList.contains("modal--show")&&(e.preventDefault(),writeUs.classList.remove("modal--show"),writeUs.classList.remove("modal--error"),overlay.classList.remove("modal-overlay--show")),map.classList.contains("modal--show")&&(e.preventDefault(),map.classList.remove("modal--show"),map.classList.remove("modal--error"),overlay.classList.remove("modal-overlay--show"))});try{storageName=localStorage.getItem("username"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}form.addEventListener("submit",function(e){username.value&&email.value&&mailBody.value?isStorageSupport&&(localStorage.setItem("username",username.value),localStorage.setItem("email",email.value)):(username.classList.remove("write-us__form--invalid"),email.classList.remove("write-us__form--invalid"),mailBody.classList.remove("write-us__form--invalid"),e.preventDefault(),writeUs.classList.remove("modal--error"),writeUs.offsetWidth=writeUs.offsetWidth,writeUs.classList.add("modal--error"),username.value||username.classList.add("write-us__form--invalid"),email.value||email.classList.add("write-us__form--invalid"),mailBody.value||mailBody.classList.add("write-us__form--invalid"))});for(var i=0;i<switches.length;i++)switches[i].addEventListener("click",function(){for(var e=0;e<slides.length;e++)slides[e].classList.remove("main-slider__slide--visible");switches[1].checked?slides[1].classList.add("main-slider__slide--visible"):switches[2].checked?slides[2].classList.add("main-slider__slide--visible"):slides[0].classList.add("main-slider__slide--visible")});var isButtonClicked=function(e){servicesButtons[e].addEventListener("click",function(s){s.preventDefault();for(var a=0;a<services.length;a++)servicesButtons[a].classList.remove("services__button--current"),services[a].classList.remove("services__slide--shown");servicesButtons[e].classList.add("services__button--current"),services[e].classList.add("services__slide--shown")})};isButtonClicked(0),isButtonClicked(1),isButtonClicked(2);
